{
  "$schema": "https://json-schema.org/draft/2020-12/schema",
  "$id": "https://iajson.org/schema/defs/common.schema.json",
  "title": "ia.json Common Types",
  "description": "Shared type definitions for the ia.json schema",
  "$defs": {
    "semver": {
      "type": "string",
      "pattern": "^(0|[1-9]\\d*)\\.(0|[1-9]\\d*)\\.(0|[1-9]\\d*)$",
      "description": "Semantic version string (MAJOR.MINOR.PATCH)",
      "examples": ["1.0.0", "2.1.3"]
    },
    "httpsUrl": {
      "type": "string",
      "format": "uri",
      "pattern": "^https://",
      "description": "An absolute HTTPS URL"
    },
    "urlPath": {
      "type": "string",
      "pattern": "^/",
      "description": "A URL path starting with /"
    },
    "httpMethod": {
      "type": "string",
      "enum": ["GET", "POST", "PUT", "PATCH", "DELETE"],
      "description": "HTTP request method"
    },
    "currencyCode": {
      "type": "string",
      "pattern": "^[A-Z]{3}$",
      "description": "ISO 4217 currency code (e.g., USD, EUR, COP)"
    },
    "languageTag": {
      "type": "string",
      "pattern": "^[a-z]{2}(-[A-Z]{2})?$",
      "description": "BCP 47 language tag (e.g., en, es, pt-BR)"
    },
    "email": {
      "type": "string",
      "format": "email",
      "description": "Email address"
    },
    "iso8601": {
      "type": "string",
      "format": "date-time",
      "description": "ISO 8601 date-time string"
    },
    "rateLimitString": {
      "type": "string",
      "pattern": "^\\d+/(second|minute|hour|day)$",
      "description": "Rate limit expression (e.g., 60/minute, 1000/hour)",
      "examples": ["60/minute", "1000/hour", "10000/day"]
    },
    "parameterType": {
      "type": "string",
      "enum": ["string", "integer", "number", "boolean", "array", "object"],
      "description": "Data type for a parameter"
    },
    "parameter": {
      "type": "object",
      "required": ["type", "required"],
      "properties": {
        "type": { "$ref": "#/$defs/parameterType" },
        "required": {
          "type": "boolean",
          "description": "Whether this parameter is required"
        },
        "description": {
          "type": "string",
          "description": "Human-readable description"
        },
        "default": {
          "description": "Default value"
        },
        "example": {
          "description": "Example value"
        },
        "enum": {
          "type": "array",
          "description": "Allowed values",
          "minItems": 1
        },
        "min": {
          "type": "number",
          "description": "Minimum value (for numbers)"
        },
        "max": {
          "type": "number",
          "description": "Maximum value (for numbers)"
        },
        "pattern": {
          "type": "string",
          "description": "Regex pattern (for strings)"
        }
      },
      "additionalProperties": false
    }
  }
}
